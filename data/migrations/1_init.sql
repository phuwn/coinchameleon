CREATE TABLE coins (
	id VARCHAR2(50) NOT NULL,
	name VARCHAR2(50),
	symbol VARCHAR2(50) NOT NULL,
	PRIMARY KEY(id)
)

CREATE TABLE market (
	coin_id VARCHAR2(50) NOT NULL,
	ts DATE,
	price REAL,
	market_cap REAL,
	total_volume REAL,
	PRIMARY KEY(coin_id, ts),
	FOREIGN KEY(coin_id) REFERENCES coins(id)
)
PARTITION BY RANGE(ts) 
(
PARTITION prices_jan2013 VALUES LESS THAN(TO_DATE('01/02/2013','DD/MM/YYYY')),
PARTITION prices_feb2013 VALUES LESS THAN(TO_DATE('01/03/2013','DD/MM/YYYY')),
PARTITION prices_mar2013 VALUES LESS THAN(TO_DATE('01/04/2013','DD/MM/YYYY')),
PARTITION prices_apr2013 VALUES LESS THAN(TO_DATE('01/05/2013','DD/MM/YYYY')),
PARTITION prices_may2013 VALUES LESS THAN(TO_DATE('01/06/2013','DD/MM/YYYY')),
PARTITION prices_jun2013 VALUES LESS THAN(TO_DATE('01/07/2013','DD/MM/YYYY')),
PARTITION prices_jul2013 VALUES LESS THAN(TO_DATE('01/08/2013','DD/MM/YYYY')),
PARTITION prices_aug2013 VALUES LESS THAN(TO_DATE('01/09/2013','DD/MM/YYYY')),
PARTITION prices_sep2013 VALUES LESS THAN(TO_DATE('01/10/2013','DD/MM/YYYY')),
PARTITION prices_oct2013 VALUES LESS THAN(TO_DATE('01/11/2013','DD/MM/YYYY')),
PARTITION prices_nov2013 VALUES LESS THAN(TO_DATE('01/12/2013','DD/MM/YYYY')),
PARTITION prices_dec2013 VALUES LESS THAN(TO_DATE('01/01/2014','DD/MM/YYYY')),
PARTITION prices_jan2014 VALUES LESS THAN(TO_DATE('01/02/2014','DD/MM/YYYY')),
PARTITION prices_feb2014 VALUES LESS THAN(TO_DATE('01/03/2014','DD/MM/YYYY')),
PARTITION prices_mar2014 VALUES LESS THAN(TO_DATE('01/04/2014','DD/MM/YYYY')),
PARTITION prices_apr2014 VALUES LESS THAN(TO_DATE('01/05/2014','DD/MM/YYYY')),
PARTITION prices_may2014 VALUES LESS THAN(TO_DATE('01/06/2014','DD/MM/YYYY')),
PARTITION prices_jun2014 VALUES LESS THAN(TO_DATE('01/07/2014','DD/MM/YYYY')),
PARTITION prices_jul2014 VALUES LESS THAN(TO_DATE('01/08/2014','DD/MM/YYYY')),
PARTITION prices_aug2014 VALUES LESS THAN(TO_DATE('01/09/2014','DD/MM/YYYY')),
PARTITION prices_sep2014 VALUES LESS THAN(TO_DATE('01/10/2014','DD/MM/YYYY')),
PARTITION prices_oct2014 VALUES LESS THAN(TO_DATE('01/11/2014','DD/MM/YYYY')),
PARTITION prices_nov2014 VALUES LESS THAN(TO_DATE('01/12/2014','DD/MM/YYYY')),
PARTITION prices_dec2014 VALUES LESS THAN(TO_DATE('01/01/2015','DD/MM/YYYY')),
PARTITION prices_jan2015 VALUES LESS THAN(TO_DATE('01/02/2015','DD/MM/YYYY')),
PARTITION prices_feb2015 VALUES LESS THAN(TO_DATE('01/03/2015','DD/MM/YYYY')),
PARTITION prices_mar2015 VALUES LESS THAN(TO_DATE('01/04/2015','DD/MM/YYYY')),
PARTITION prices_apr2015 VALUES LESS THAN(TO_DATE('01/05/2015','DD/MM/YYYY')),
PARTITION prices_may2015 VALUES LESS THAN(TO_DATE('01/06/2015','DD/MM/YYYY')),
PARTITION prices_jun2015 VALUES LESS THAN(TO_DATE('01/07/2015','DD/MM/YYYY')),
PARTITION prices_jul2015 VALUES LESS THAN(TO_DATE('01/08/2015','DD/MM/YYYY')),
PARTITION prices_aug2015 VALUES LESS THAN(TO_DATE('01/09/2015','DD/MM/YYYY')),
PARTITION prices_sep2015 VALUES LESS THAN(TO_DATE('01/10/2015','DD/MM/YYYY')),
PARTITION prices_oct2015 VALUES LESS THAN(TO_DATE('01/11/2015','DD/MM/YYYY')),
PARTITION prices_nov2015 VALUES LESS THAN(TO_DATE('01/12/2015','DD/MM/YYYY')),
PARTITION prices_dec2015 VALUES LESS THAN(TO_DATE('01/01/2016','DD/MM/YYYY')),
PARTITION prices_jan2016 VALUES LESS THAN(TO_DATE('01/02/2016','DD/MM/YYYY')),
PARTITION prices_feb2016 VALUES LESS THAN(TO_DATE('01/03/2016','DD/MM/YYYY')),
PARTITION prices_mar2016 VALUES LESS THAN(TO_DATE('01/04/2016','DD/MM/YYYY')),
PARTITION prices_apr2016 VALUES LESS THAN(TO_DATE('01/05/2016','DD/MM/YYYY')),
PARTITION prices_may2016 VALUES LESS THAN(TO_DATE('01/06/2016','DD/MM/YYYY')),
PARTITION prices_jun2016 VALUES LESS THAN(TO_DATE('01/07/2016','DD/MM/YYYY')),
PARTITION prices_jul2016 VALUES LESS THAN(TO_DATE('01/08/2016','DD/MM/YYYY')),
PARTITION prices_aug2016 VALUES LESS THAN(TO_DATE('01/09/2016','DD/MM/YYYY')),
PARTITION prices_sep2016 VALUES LESS THAN(TO_DATE('01/10/2016','DD/MM/YYYY')),
PARTITION prices_oct2016 VALUES LESS THAN(TO_DATE('01/11/2016','DD/MM/YYYY')),
PARTITION prices_nov2016 VALUES LESS THAN(TO_DATE('01/12/2016','DD/MM/YYYY')),
PARTITION prices_dec2016 VALUES LESS THAN(TO_DATE('01/01/2017','DD/MM/YYYY')),
PARTITION prices_jan2017 VALUES LESS THAN(TO_DATE('01/02/2017','DD/MM/YYYY')),
PARTITION prices_feb2017 VALUES LESS THAN(TO_DATE('01/03/2017','DD/MM/YYYY')),
PARTITION prices_mar2017 VALUES LESS THAN(TO_DATE('01/04/2017','DD/MM/YYYY')),
PARTITION prices_apr2017 VALUES LESS THAN(TO_DATE('01/05/2017','DD/MM/YYYY')),
PARTITION prices_may2017 VALUES LESS THAN(TO_DATE('01/06/2017','DD/MM/YYYY')),
PARTITION prices_jun2017 VALUES LESS THAN(TO_DATE('01/07/2017','DD/MM/YYYY')),
PARTITION prices_jul2017 VALUES LESS THAN(TO_DATE('01/08/2017','DD/MM/YYYY')),
PARTITION prices_aug2017 VALUES LESS THAN(TO_DATE('01/09/2017','DD/MM/YYYY')),
PARTITION prices_sep2017 VALUES LESS THAN(TO_DATE('01/10/2017','DD/MM/YYYY')),
PARTITION prices_oct2017 VALUES LESS THAN(TO_DATE('01/11/2017','DD/MM/YYYY')),
PARTITION prices_nov2017 VALUES LESS THAN(TO_DATE('01/12/2017','DD/MM/YYYY')),
PARTITION prices_dec2017 VALUES LESS THAN(TO_DATE('01/01/2018','DD/MM/YYYY')),
PARTITION prices_jan2018 VALUES LESS THAN(TO_DATE('01/02/2018','DD/MM/YYYY')),
PARTITION prices_feb2018 VALUES LESS THAN(TO_DATE('01/03/2018','DD/MM/YYYY')),
PARTITION prices_mar2018 VALUES LESS THAN(TO_DATE('01/04/2018','DD/MM/YYYY')),
PARTITION prices_apr2018 VALUES LESS THAN(TO_DATE('01/05/2018','DD/MM/YYYY')),
PARTITION prices_may2018 VALUES LESS THAN(TO_DATE('01/06/2018','DD/MM/YYYY')),
PARTITION prices_jun2018 VALUES LESS THAN(TO_DATE('01/07/2018','DD/MM/YYYY')),
PARTITION prices_jul2018 VALUES LESS THAN(TO_DATE('01/08/2018','DD/MM/YYYY')),
PARTITION prices_aug2018 VALUES LESS THAN(TO_DATE('01/09/2018','DD/MM/YYYY')),
PARTITION prices_sep2018 VALUES LESS THAN(TO_DATE('01/10/2018','DD/MM/YYYY')),
PARTITION prices_oct2018 VALUES LESS THAN(TO_DATE('01/11/2018','DD/MM/YYYY')),
PARTITION prices_nov2018 VALUES LESS THAN(TO_DATE('01/12/2018','DD/MM/YYYY')),
PARTITION prices_dec2018 VALUES LESS THAN(TO_DATE('01/01/2019','DD/MM/YYYY')),
PARTITION prices_jan2019 VALUES LESS THAN(TO_DATE('01/02/2019','DD/MM/YYYY')),
PARTITION prices_feb2019 VALUES LESS THAN(TO_DATE('01/03/2019','DD/MM/YYYY')),
PARTITION prices_mar2019 VALUES LESS THAN(TO_DATE('01/04/2019','DD/MM/YYYY')),
PARTITION prices_apr2019 VALUES LESS THAN(TO_DATE('01/05/2019','DD/MM/YYYY')),
PARTITION prices_may2019 VALUES LESS THAN(TO_DATE('01/06/2019','DD/MM/YYYY')),
PARTITION prices_jun2019 VALUES LESS THAN(TO_DATE('01/07/2019','DD/MM/YYYY')),
PARTITION prices_jul2019 VALUES LESS THAN(TO_DATE('01/08/2019','DD/MM/YYYY')),
PARTITION prices_aug2019 VALUES LESS THAN(TO_DATE('01/09/2019','DD/MM/YYYY')),
PARTITION prices_sep2019 VALUES LESS THAN(TO_DATE('01/10/2019','DD/MM/YYYY')),
PARTITION prices_oct2019 VALUES LESS THAN(TO_DATE('01/11/2019','DD/MM/YYYY')),
PARTITION prices_nov2019 VALUES LESS THAN(TO_DATE('01/12/2019','DD/MM/YYYY')),
PARTITION prices_dec2019 VALUES LESS THAN(TO_DATE('01/01/2020','DD/MM/YYYY')),
PARTITION prices_jan2020 VALUES LESS THAN(TO_DATE('01/02/2020','DD/MM/YYYY')),
PARTITION prices_feb2020 VALUES LESS THAN(TO_DATE('01/03/2020','DD/MM/YYYY')),
PARTITION prices_mar2020 VALUES LESS THAN(TO_DATE('01/04/2020','DD/MM/YYYY')),
PARTITION prices_apr2020 VALUES LESS THAN(TO_DATE('01/05/2020','DD/MM/YYYY')),
PARTITION prices_may2020 VALUES LESS THAN(TO_DATE('01/06/2020','DD/MM/YYYY')),
PARTITION prices_jun2020 VALUES LESS THAN(TO_DATE('01/07/2020','DD/MM/YYYY')),
PARTITION prices_jul2020 VALUES LESS THAN(TO_DATE('01/08/2020','DD/MM/YYYY')),
PARTITION prices_aug2020 VALUES LESS THAN(TO_DATE('01/09/2020','DD/MM/YYYY')),
PARTITION prices_sep2020 VALUES LESS THAN(TO_DATE('01/10/2020','DD/MM/YYYY')),
PARTITION prices_oct2020 VALUES LESS THAN(TO_DATE('01/11/2020','DD/MM/YYYY')),
PARTITION prices_nov2020 VALUES LESS THAN(TO_DATE('01/12/2020','DD/MM/YYYY')),
PARTITION prices_dec2020 VALUES LESS THAN(TO_DATE('01/01/2021','DD/MM/YYYY')),
PARTITION prices_jan2021 VALUES LESS THAN(TO_DATE('01/02/2021','DD/MM/YYYY')),
PARTITION prices_feb2021 VALUES LESS THAN(TO_DATE('01/03/2021','DD/MM/YYYY')),
PARTITION prices_mar2021 VALUES LESS THAN(TO_DATE('01/04/2021','DD/MM/YYYY')),
PARTITION prices_apr2021 VALUES LESS THAN(TO_DATE('01/05/2021','DD/MM/YYYY')),
PARTITION prices_may2021 VALUES LESS THAN(TO_DATE('01/06/2021','DD/MM/YYYY')),
PARTITION prices_jun2021 VALUES LESS THAN(TO_DATE('01/07/2021','DD/MM/YYYY')),
PARTITION prices_jul2021 VALUES LESS THAN(TO_DATE('01/08/2021','DD/MM/YYYY')),
PARTITION prices_aug2021 VALUES LESS THAN(TO_DATE('01/09/2021','DD/MM/YYYY')),
PARTITION prices_sep2021 VALUES LESS THAN(TO_DATE('01/10/2021','DD/MM/YYYY')),
PARTITION prices_oct2021 VALUES LESS THAN(TO_DATE('01/11/2021','DD/MM/YYYY')),
PARTITION prices_nov2021 VALUES LESS THAN(TO_DATE('01/12/2021','DD/MM/YYYY')),
PARTITION prices_dec2021 VALUES LESS THAN(TO_DATE('01/01/2022','DD/MM/YYYY'))
);

CREATE INDEX market_ts_idx ON market(ts);